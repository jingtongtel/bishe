package com.boco.human.v01.handler;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.boco.human.v01.DataViewManager;

public abstract class AbstractViewHandler implements ViewHandler {

	
	protected static final String DATAVIEW_DEF_NAME = "default";

	protected abstract String getMetricName();

	protected abstract String getDataViewName();

	protected abstract List formatData(Map<?,?> paraMap);
	
	protected AbstractViewHandler(){
		DataViewManager.registerHanlder(this);
	}


	/**
	 * @see com.example.gd.ViewHandler#getHanderlerId()
	 * 
	 *  
	 */
	public String getHanderlerId() {
		return this.getMetricName()+"."+this.getDataViewName();
	}


	/**
	 * @see com.example.gd.ViewHandler#getDataMap(java.util.Map)
	 * 
	 *  
	 */
	public Map getDataMap(Map paraMap) {
		HashMap dataMap = new HashMap();
		dataMap.put("data", this.formatData(paraMap));
		dataMap.put("server timestamp", System.currentTimeMillis());
		return dataMap;
	}

}
