<?xml version="1.0" encoding="UTF-8" ?>   
<!DOCTYPE mapper   
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- mybatis操作student对象的配置文件，与mapper接口对应 -->
<mapper namespace="com.boco.human.v01.mapper.CodeMapper">

    <!-- 全量查询，'id'须唯一，与mapper接口方法名保持一致 -->
	<select id="query"    parameterType="Map"  resultType="hashMap">
		SELECT DIC_NAME dicName,DIC_VALUE dicValue  FROM pub_dim_datadictionary 
		<where> 
		<if test="dicType!=null and !dicType.equals('')">
			 	  AND DIC_TYPE  in
		<foreach item="item" index="index" collection="dicType" open="(" separator="," close=")">   
            		#{item}
 		</foreach> 
		</if>
		<if test="parentId!=null and !parentId.equals('')">
				 AND PARENT_ID=#{parentId}
		</if>
	 	</where> 
	</select>
	
	 <!-- 全量查询，'id'须唯一，与mapper接口方法名保持一致 -->
	<select id="queryRegionLevel"    parameterType="Map"  resultType="hashMap">
SELECT
    REGION_CODE regionCode,
	REGION_NAME regionName,
    REGION_AREA regionArea
FROM
	DIM_KEYREGION
WHERE
	REGION_TYPE = #{regionType}
		<if test="regionLevel!=null and !regionLevel.equals('')">
		 AND  REGION_LVL &lt;=#{regionLevel}
		</if>
		
		<if test="regionName!=null and !regionName.equals('')">
		 AND REGION_NAME like concat('%',#{regionName},'%')
		</if>
		<if test="regionCode!=null and !regionCode.equals('')">
		 AND REGION_CODE LIKE  concat(#{regionCode},'%')
		</if>
		ORDER BY
			REGION_CODE	
	</select>
	
	<!-- 全量查询，'id'须唯一，与mapper接口方法名保持一致 -->
	<select id="queryRegion"    parameterType="Map"  resultType="hashMap">
SELECT
	PROV_NAME provName,
	PROV_CODE provCode,
	PROV_AREA provArea,
	CITY_NAME cityName,
	CITY_CODE cityCode,
	CITY_AREA cityArea,
	COUNTY_NAME countyName,
	COUNTY_CODE countyCode,
	COUNTY_AREA countyArea,
	KEYREGION_NAME keyRegionName,
	KEYREGION_CODE keyRegionCode,
	KEYREGION_AREA keyRegionArea
FROM
	pub_dim_keyregion
WHERE 1=1
		<if test="regionType!=null and !regionType.equals('')">
			 	  AND REGION_TYPE=#{regionType}
		</if>
		<if test="provCode!=null"> AND PROV_CODE LIKE #{provCode}</if>
		<if test="cityCode!=null">AND CITY_CODE LIKE concat(#{cityCode},'%')</if>
		<if test="countyCode!=null">AND COUNTY_CODE LIKE concat(#{countyCode},'%')</if>
		
		
<!-- 		<if test="provName!=null and !provName.equals('')"> -->
<!-- 		 AND PROV_NAME in  -->
<!-- 		<foreach item="item" index="index" collection="provName" open="(" separator="," close=")">   -->
<!--            #{item}   -->
<!-- 		</foreach>   -->
<!-- 		</if> -->
<!-- 		<if test="provCode!=null and !provCode.equals('')"> -->
<!-- 		 AND PROV_CODE in  -->
<!-- 		<foreach item="item" index="index" collection="provCode" open="(" separator="," close=")">   -->
<!--            #{item}   -->
<!-- 		</foreach>   -->
<!-- 		</if> -->
<!-- 		<if test="cityName!=null and !cityName.equals('')"> -->
<!-- 		 AND CITY_NAME in  -->
<!-- 		<foreach item="item" index="index" collection="cityName" open="(" separator="," close=")">   -->
<!--            #{item}   -->
<!-- 		</foreach>   -->
<!-- 		</if> -->
<!-- 		<if test="cityCode!=null and !cityCode.equals('')"> -->
<!-- 		 AND CITY_CODE in  -->
<!-- 		<foreach item="item" index="index" collection="cityCode" open="(" separator="," close=")">   -->
<!--            #{item}   -->
<!-- 		</foreach>   -->
<!-- 		</if> -->
<!-- 		<if test="countyName!=null and !countyName.equals('')"> -->
<!-- 		 AND COUNTY_NAME in  -->
<!-- 		<foreach item="item" index="index" collection="countyName" open="(" separator="," close=")">   -->
<!--            #{item}   -->
<!-- 		</foreach>   -->
<!-- 		</if> -->
<!-- 		<if test="countyCode!=null and !countyCode.equals('')"> -->
<!-- 		 AND COUNTY_CODE in  -->
<!-- 		<foreach item="item" index="index" collection="countyCode" open="(" separator="," close=")">   -->
<!--            #{item}   -->
<!-- 		</foreach>   -->
<!-- 		</if> -->
<!-- 		<if test="keyRegionName!=null and !keyRegionName.equals('')"> -->
<!-- 		 AND KEYREGION_NAME in  -->
<!-- 		<foreach item="item" index="index" collection="keyRegionName" open="(" separator="," close=")">   -->
<!--            #{item}   -->
<!-- 		</foreach>   -->
<!-- 		</if> -->
<!-- 		<if test="keyRegionCode!=null and !keyRegionCode.equals('')"> -->
<!-- 		 AND KEYREGION_CODE in  -->
<!-- 		<foreach item="item" index="index" collection="keyRegionCode" open="(" separator="," close=")">   -->
<!--            #{item}   -->
<!-- 		</foreach>   -->
<!-- 		</if> -->
		
			
	</select>
</mapper>
