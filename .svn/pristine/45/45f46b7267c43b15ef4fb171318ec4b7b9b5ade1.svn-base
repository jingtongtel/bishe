package com.boco.human.v01.handler;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.boco.human.v01.service.CorridorService;

@Component
public class TravelCorridorNestHandler extends TravelCorridorDefHandler {
	@Autowired
	private  CorridorService service; 

	@Override
	protected String getDataViewName() {
		// TODO Auto-generated method stub
		return "nest";
	}
	
	
	
	@Override
	protected Object formatData(Map paraMap) {
		// TODO Auto-generated method stub
		
		
		String key = "";
		List<Map> list = (List<Map>) service.corridorQueryNoOrder(paraMap);
	
		List<Map<String,?>> itemList = null;
		List resultList = new ArrayList();
		Map resultMap = null;
		for(Map map:list){
			if(!key.equals((String)map.get("corridorName"))){
				resultMap = new HashMap();
				resultList.add(resultMap);
				key = (String)map.get("corridorName");
				itemList = new ArrayList<Map<String,?>>();
				resultMap.put("dataArray", itemList);
				resultMap.put("corridorName",key);
				
			}
			
			Map itemMap = new HashMap();
			itemList.add(itemMap);
			itemMap.put("roadName",map.get("roadName"));
			itemMap.put("tideAttribute",map.get("tideAttribute"));
			itemMap.put("importance",map.get("importance"));
			itemMap.put("userSum",map.get("userSum"));
			
		}
		
		return resultList;
	}



}
