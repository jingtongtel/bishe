package com.boco.human.v01.handler;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.springframework.stereotype.Component;

@Component
public class TravelIntensityEChartsMigrationHandler extends TravelIntensityDefHandler {

	@Override
	protected String getDataViewName() {
		// TODO Auto-generated method stub
		return "echarts3-migrate";
	}

	@Override
	protected List formatData(Map paraMap) {
		// TODO Auto-generated method stub
		List<Map> list = super.formatData(paraMap);
		
		List newList = new ArrayList();
		String oCity = (String) list.get(0).get("oName");
		ArrayList listInner1 = new ArrayList();
		ArrayList listInner2 = new ArrayList();
		for(Map<String, Object> map : list){
			Map mInnerO = new HashMap();
			Map mInnerD = new HashMap();
			mInnerO.put("name", map.get("oName"));
			mInnerD.put("name", map.get("dName"));
			mInnerD.put("value", map.get("val"));
			
			
			if(!map.get("oName").equals(oCity)){
				oCity = (String)map.get("oName");
				newList.add(listInner2);
				listInner2 = new ArrayList();
			}
			listInner1.add(mInnerO);
			listInner1.add(mInnerD);
			listInner2.add(listInner1);
			listInner1 = new ArrayList();
		}
		newList.add(listInner2);
		return newList;
	}

}
