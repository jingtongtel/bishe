<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>Document</title>
  <script src="jquery-3.1.1.js"></script>
  <script>
	var defPostOpts={
		  /*
		  url: "http://127.0.0.1:8080/demo/json",
		  method: 'post',
		  contentType: 'application/json',
		  dataType:"json",
		  //dataType:'JSONP',
		  data: JSON.stringify({
				"zipcode":97201,
				"myarray":[1,2,3,4,5],
				"obj":{
					"objInner":{
						"name":"张晨","weight":170
						}
				}
				}),
		  */
		  dataType:"json",
		  success: function(result) {
			//alert(result);
			$("#responseContent").html( "<strong>" + JSON.stringify(result) + "</strong>" );
		  },
		  error:function(jqXHR,errTypeStr){
			$("#responseContent").html( "<strong> Status Code:<font color='red'>" +jqXHR.status+"</font><br />"+JSON.stringify(jqXHR) + "</strong>" );
		  }
	}

	function postServer(){
		$("#responseContent").html("");
		var mf = document.myForm;
		var newPostOpts = {};
		newPostOpts.url = mf.myUrl.value;
		newPostOpts.method = mf.method.value;
		newPostOpts.contentType = mf.contentType.value;
		newPostOpts.data = mf.jsonData.value;

		$.ajax($.extend(defPostOpts,newPostOpts));
	}
	
	function dbjson(){
		var sql = document.myForm.sqlTa.value;
		sql = encodeURI(sql);
		data = {"sql":sql}
		alert(sql);
		var url = "http://127.0.0.1/8080/demo/dbjson";
		$.post(url,data,function(data) {
		  $("#responseContent").html( data );
		});
	}

	$(function(){
		postServer();
	})
	

	function openwin() { 
		//写成一行 
		window.open ("工大项目公共组件指标接口文档v01.htm", "newwindow", "height=100, width=400, toolbar=no,menubar=no, scrollbars=no, resizable=no, location=no, status=no") 
	}		 
 

 
  </script>
 </head>
 <body>
	<form name="myForm">
	  url :<input type="txt" name="myUrl" value="http://127.0.0.1/mbd/v01/metric/travel/intensity" style="width:80%" />
	  <br />
	  method :
	  <select name="method">
		<option value="post">post</option>
		<option value="get">get</option>
	  </select>
	  <br />
	  contentType :
	  <select name="contentType">
		<option value="application/json">application/json</option>
		<option value="text/plain">text/plain</option>
	  </select>
	  <br />
	  jsonData:
	  <input type="txt" name="jsonData" value='{"para":{"dataView":"default","zipcode":97201,"myarray":[1,2,3,4,5],"obj":{"objInner":{"name":"奥林匹克","age":40}}}}' style="width:80%" />
	  <br />
	
	  <input type="button" value="postServer" onclick="postServer();" />
	  <br /><br />
	  <textarea name="sqlTa" style="width:50%;height:160px;"></textarea>
	  <br />
	  <input type="button" value="db2json" onclick="dbjson();" />
	   <a href="#" onclick="openwin()">接口文档</a> 
	  <hr>
  </form>
  <div id="responseContent"></div>
  
 
 </body>
</html>
